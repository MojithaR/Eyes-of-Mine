(this.webpackJsonp=this.webpackJsonp||[]).push([[230],{"3lQS":function(e,t,n){"use strict";var i=n("tbP8"),r=n("FxFN"),s=n("5c3i"),a={components:{GlAvatar:i.a},props:{projectId:{type:[Number,String],default:0,required:!1,validator:e=>"string"!=typeof e||Object(r.f)(e)},projectName:{type:String,required:!0},projectAvatarUrl:{type:String,required:!1,default:""},size:{type:Number,default:32,required:!1},alt:{type:String,required:!1,default:void 0}},computed:{avatarAlt(){var e;return null!==(e=this.alt)&&void 0!==e?e:this.projectName},entityId(){return Object(r.f)(this.projectId)?Object(r.e)(this.projectId):this.projectId}},AVATAR_SHAPE_OPTION_RECT:s.a},o=n("tBpV"),l=Object(o.a)(a,(function(){return(0,this._self._c)("gl-avatar",{attrs:{shape:this.$options.AVATAR_SHAPE_OPTION_RECT,"entity-id":this.entityId,"entity-name":this.projectName,src:this.projectAvatarUrl,alt:this.avatarAlt,size:this.size,"fallback-on-error":!0}})}),[],!1,null,null,null);t.a=l.exports},"5tFN":function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"e",(function(){return r})),n.d(t,"h",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"g",(function(){return u}));const i="Escape",r="Enter",s="NumpadEnter",a="Backspace",o="ArrowDown",l="ArrowUp",c="End",u="Home"},Eqlq:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CurrentUserFrecentGroups"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"frecentGroups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"namespace"},name:{kind:"Name",value:"fullName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:122}};n.loc.source={body:"query CurrentUserFrecentGroups {\n  frecentGroups {\n    id\n    name\n    namespace: fullName\n    webUrl\n    avatarUrl\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.CurrentUserFrecentGroups=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var s=i[t]||new Set,a=new Set,o=new Set;for(s.forEach((function(e){o.add(e)}));o.size>0;){var l=o;o=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(i[e]||new Set).forEach((function(e){o.add(e)})))}))}return a.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"CurrentUserFrecentGroups")},FxFN:function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"g",(function(){return m})),n.d(t,"d",(function(){return p}));var i=n("P/Kr"),r=n.n(i),s=(n("TPye"),n("FMw2"),n("3UXl"),n("iyoE"),n("99pJ")),a=n.n(s);const o=function(e){return!("string"!=typeof e||!e.startsWith("gid://gitlab/"))},l=function(e){const[t,n]=(""+e).replace(/gid:\/\/gitlab\//g,"").split("/");return{type:t,id:n}},c=function(e=""){const t=o(e)?l(e).id:e,n=parseInt(t,10);return Number.isInteger(n)?n:null},u={Append:"APPEND",Remove:"REMOVE",Replace:"REPLACE"},d=function(e,t){if("string"!=typeof e)throw new TypeError("type must be a string; got "+typeof e);if(!["number","string"].includes(typeof t))throw new TypeError("id must be a number or string; got "+typeof t);return o(t)?t:`gid://gitlab/${e}/${t}`},h=function(e){if(!r()(e))throw new TypeError("nodes must be an array; got "+typeof e);return e.map((function(e){return e.id?{...e,id:c(e.id)}:e}))},m=function(e,t=1e4){const n=function(e){a.a.hidden()?e.stopPolling():e.startPolling(t)};n(e),a.a.change(n.bind(null,e))},p=function(e,t=""){return{fetchOptions:{method:"GET"},headers:{"X-GITLAB-GRAPHQL-FEATURE-CORRELATION":e,"X-GITLAB-GRAPHQL-RESOURCE-ETAG":t,"X-Requested-With":"XMLHttpRequest"}}}},Htnb:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("3UXl"),n("iyoE"),n("FMw2");var i=n("PxiM"),r=n.n(i),s=n("D+x4");function a(e,t="",n="<b>",i="</b>"){if(!e)return"";if(!t)return e;const a=Object(s.b)(e.toString(),{ALLOWED_TAGS:[]}),o=r.a.match(a,t.toString());return a.split("").map((function(e,t){return o.includes(t)?`${n}${e}${i}`:e})).join("")}},JTkt:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return a}));n("FMw2");const i=document.createElement("div"),r=function(e){return i.style.color="",i.style.color=e,i.style.color.length>0},s=function(e=""){return e?/^#([0-9A-F]{3}){1,2}$/i.test(e):null};function a(){var e;const t=["dark","solarized-dark","monokai"];var n;return(null===(e=document.body.dataset.page)||void 0===e?void 0:e.startsWith("ide:"))?t.includes(null===(n=window.gon)||void 0===n?void 0:n.user_color_scheme):document.documentElement.classList.contains("gl-dark")}},YYYz:function(e,t,n){"use strict";n.r(t);var i=n("3CjL"),r=n.n(i),s=n("Tmea"),a=n.n(s),o=(n("FMw2"),n("KnFb")),l=n("LLbv"),c=n("waGw"),u=n("iN9h"),d=n("s1D3"),h=n("e67P"),m=n("1cpz"),p=n("yi8e"),g=n("0AwG"),f=n("3twG"),v=n("GuZl"),_=n("/lV4"),y=n("5tFN"),S=n("gr1G"),b=n("JTkt"),C=n("F/pm"),x=(n("3UXl"),n("iyoE"),n("RFHG"),n("z6RN"),n("xuo1"),n("UezY"),n("hG7+"),n("aFm2"),n("R9qC"),n("PxiM")),w=n.n(x),E=n("fSQg"),k=n("FkSe"),O=n("7F3p"),A=n("2ibD"),I=n("ygVz"),T=n("h2IV"),j=n("I4EJ"),N=n("tbP8"),P=n("Mp8J"),R=n("Htnb"),D=n("5c3i"),F={name:"CommandPaletteSearchItem",components:{GlAvatar:N.a,GlIcon:d.a},directives:{SafeHtml:P.a},props:{item:{type:Object,required:!0},searchQuery:{type:String,required:!0}},computed:{highlightedName(){return Object(R.a)(this.item.text,this.searchQuery)}},AVATAR_SHAPE_OPTION_RECT:D.a},G=n("tBpV"),L=Object(G.a)(F,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"gl-display-flex gl-align-items-center"},[void 0!==e.item.avatar_url?t("gl-avatar",{staticClass:"gl-mr-3",attrs:{src:e.item.avatar_url,"entity-id":e.item.entity_id,"entity-name":e.item.entity_name,size:e.item.avatar_size,shape:e.$options.AVATAR_SHAPE_OPTION_RECT,"aria-hidden":"true"}}):e._e(),e._v(" "),e.item.icon?t("gl-icon",{staticClass:"gl-mr-3",attrs:{name:e.item.icon}}):e._e(),e._v(" "),t("span",{staticClass:"gl-display-flex gl-flex-direction-column"},[t("span",{directives:[{name:"safe-html",rawName:"v-safe-html",value:e.highlightedName,expression:"highlightedName"}],staticClass:"gl-text-gray-900"}),e._v(" "),e.item.namespace?t("span",{directives:[{name:"safe-html",rawName:"v-safe-html",value:e.item.namespace,expression:"item.namespace"}],staticClass:"gl-font-sm gl-text-gray-500"}):e._e()])],1)}),[],!1,null,null,null).exports,q=n("nUKU"),M=n.n(q),$=n("59DU"),U=n.n($),H=n("3cHC");const B=function({name:e,items:t}){return{name:e||j.c,items:t.filter((function({component:e}){return"invite_members"!==e}))}},Q=function(e,t){var n;const i=function({id:e,title:t}){return{extraAttrs:{"data-track-action":j.o,"data-track-label":e||H.u,...e?{}:{"data-track-extra":JSON.stringify({title:t})}}}};if(e.push({text:t.title,keywords:t.title,icon:t.icon,href:t.link,...i(t)}),null!==(n=t.items)&&void 0!==n&&n.length){const n=t.items.map((function(e){return{keywords:e.title,text:[t.title,e.title].join(" > "),href:e.link,icon:t.icon,...i(e)}}));e=[...e,...n]}return e},z=function(e,t){return{icon:"doc-code",text:t,href:Object(f.C)(e,t),extraAttrs:{"data-track-action":j.o,"data-track-label":"file"}}};var V={name:"CommandPaletteItems",components:{GlDisclosureDropdownGroup:E.a,GlLoadingIcon:k.a,SearchItem:L},mixins:[I.b.mixin()],inject:["commandPaletteCommands","commandPaletteLinks","autocompletePath","searchContext","projectFilesPath","projectBlobPath"],props:{searchQuery:{type:String,required:!0},handle:{type:String,required:!0,validator:function(e){return[...j.b,j.i].includes(e)}}},data:function(){return{groups:[],loading:!1,projectFiles:[],debouncedSearch:a()((function(){switch(this.handle){case j.a:this.getCommandsAndPages();break;case j.q:case j.j:case j.e:this.getScopedItems();break;case j.i:this.getProjectFiles()}}),v.k)}},computed:{isCommandMode(){return this.handle===j.a},isPathMode(){return this.handle===j.i},commands(){return this.commandPaletteCommands.map(B)},links(){return this.commandPaletteLinks.reduce(Q,[])},filteredCommands(){var e=this;return this.searchQuery?this.commands.map((function({name:t,items:n}){return{name:t,items:e.filterBySearchQuery(n,"text")}})).filter((function({items:e}){return e.length})):this.commands},hasResults(){var e;return(null===(e=this.groups)||void 0===e?void 0:e.length)&&this.groups.some((function(e){var t;return null===(t=e.items)||void 0===t?void 0:t.length}))},hasSearchQuery(){var e,t;return this.isCommandMode||this.isPathMode?(null===(t=this.searchQuery)||void 0===t?void 0:t.length)>0:(null===(e=this.searchQuery)||void 0===e?void 0:e.length)>2},searchTerm(){return this.handle===j.e?`${j.e}${this.searchQuery}`:this.searchQuery},filteredProjectFiles(){return this.searchQuery?this.filterBySearchQuery(this.projectFiles,"text").slice(0,j.f):this.projectFiles.slice(0,j.f)}},watch:{searchQuery:{handler(){this.debouncedSearch()},immediate:!0},handle:{handler(e,t){var n;void 0!==t&&this.debouncedSearch();const i=null!==(n=j.p[e])&&void 0!==n?n:"unknown";this.track(j.n,{label:i})},immediate:!0}},updated(){this.$emit("updated")},methods:{filterBySearchQuery(e,t="keywords"){return w.a.filter(e,this.searchQuery,{key:t})},async getProjectFiles(){if(!this.projectFiles.length){this.loading=!0;try{const e=await A.a.get(this.projectFilesPath);this.projectFiles=null==e?void 0:e.data.map(z.bind(null,this.projectBlobPath))}catch(e){O.a(e)}finally{this.loading=!1}}this.groups=[{name:j.h,items:this.filteredProjectFiles}]},getCommandsAndPages(){if(!this.searchQuery)return void(this.groups=[...this.commands]);this.groups=[...this.filteredCommands];const e=this.filterBySearchQuery(this.links);e.length&&this.groups.push({name:j.g,items:e})},async getScopedItems(){var e;if(!((null===(e=this.searchQuery)||void 0===e?void 0:e.length)<3)){this.loading=!0;try{var t;const e=await A.a.get(function({path:e,searchTerm:t,handle:n,projectId:i}){const r=M()({term:t,project_id:i,filter:"search",scope:j.l[n]},U.a);return`${e}?${Object(f.E)(r)}`}({path:this.autocompletePath,searchTerm:this.searchTerm,handle:this.handle,projectId:null===(t=this.searchContext.project)||void 0===t?void 0:t.id}));this.groups=[{name:j.d[this.handle],items:e.data.map(T.a)}]}catch(e){O.a(e)}finally{this.loading=!1}}}}},W=Object(G.a)(V,(function(){var e=this,t=e._self._c;return t("div",[e.loading?t("gl-loading-icon",{staticClass:"gl-my-5",attrs:{size:"lg"}}):e.hasResults?t("ul",{staticClass:"gl-p-0 gl-m-0 gl-list-style-none"},e._l(e.groups,(function(n,i){return t("gl-disclosure-dropdown-group",{key:i,class:{"gl-mt-0!":0===i},attrs:{group:n,bordered:""},scopedSlots:e._u([{key:"list-item",fn:function({item:n}){return[t("search-item",{attrs:{item:n,"search-query":e.searchQuery}})]}}],null,!0)})})),1):e.hasSearchQuery&&!e.hasResults?t("div",{staticClass:"gl-text-gray-700 gl-pl-5 gl-py-3"},[e._v("\n    "+e._s(e.__("No results found"))+"\n  ")]):e._e()],1)}),[],!1,null,null,null).exports,J={name:"FakeSearchInput",props:{userInput:{type:String,required:!0},scope:{type:String,required:!0,validator:function(e){return[...j.b,j.i].includes(e)}}},computed:{placeholder(){return j.m[this.scope]}}},Y=n("LPAU"),X=n.n(Y),K=n("y8hF"),Z=n.n(K),ee={insert:"head",singleton:!1},te=(X()(Z.a,ee),Z.a.locals,Object(G.a)(J,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"gl-display-flex gl-pointer-events-none fake-input"},[t("span",{staticClass:"gl-opacity-0",attrs:{"data-testid":"search-scope"}},[e._v(e._s(e.scope)+" ")]),e._v(" "),e.userInput?e._e():t("span",{staticClass:"gl-text-gray-500 gl-pointer-events-none",attrs:{"data-testid":"search-scope-placeholder"}},[e._v(e._s(e.placeholder))])])}),[],!1,null,"3b7a265c",null).exports),ne=n("dsWN"),ie={name:"GlobalSearchAutocompleteItems",i18n:{AUTOCOMPLETE_ERROR_MESSAGE:S.b},components:{GlAvatar:N.a,GlAlert:ne.a,GlLoadingIcon:k.a,GlDisclosureDropdownGroup:E.a},directives:{SafeHtml:P.a},computed:{...Object(p.f)(["search","loading","autocompleteError"]),...Object(p.d)(["autocompleteGroupedSearchOptions","scopedSearchOptions"])},methods:{highlightedName(e){return Object(R.a)(e,this.search)}},AVATAR_SHAPE_OPTION_RECT:D.a},re=Object(G.a)(ie,(function(){var e=this,t=e._self._c;return t("div",[e.loading?t("gl-loading-icon",{staticClass:"my-4",attrs:{size:"lg"}}):t("ul",{staticClass:"gl-m-0 gl-p-0 gl-list-style-none"},e._l(e.autocompleteGroupedSearchOptions,(function(n,i){return t("gl-disclosure-dropdown-group",{key:n.name,class:{"gl-mt-0!":0===i},attrs:{group:n,bordered:""},scopedSlots:e._u([{key:"list-item",fn:function({item:n}){return[t("div",{staticClass:"gl-display-flex gl-align-items-center"},[void 0!==n.avatar_url?t("gl-avatar",{staticClass:"gl-mr-3",attrs:{src:n.avatar_url,"entity-id":n.entity_id,"entity-name":n.entity_name,size:n.avatar_size,shape:e.$options.AVATAR_SHAPE_OPTION_RECT,"aria-hidden":"true"}}):e._e(),e._v(" "),t("span",{staticClass:"gl-display-flex gl-flex-direction-column"},[t("span",{directives:[{name:"safe-html",rawName:"v-safe-html",value:e.highlightedName(n.text),expression:"highlightedName(item.text)"}],staticClass:"gl-text-gray-900",attrs:{"data-testid":"autocomplete-item-name"}}),e._v(" "),n.value?t("span",{directives:[{name:"safe-html",rawName:"v-safe-html",value:n.namespace,expression:"item.namespace"}],staticClass:"gl-font-sm gl-text-gray-500",attrs:{"data-testid":"autocomplete-item-namespace"}}):e._e()])],1)]}}],null,!0)})})),1),e._v(" "),e.autocompleteError?t("gl-alert",{staticClass:"gl-text-body gl-mt-2",attrs:{dismissible:!1,variant:"danger"}},[e._v("\n    "+e._s(e.$options.i18n.AUTOCOMPLETE_ERROR_MESSAGE)+"\n  ")]):e._e()],1)}),[],!1,null,null,null).exports,se=(n("B++/"),n("47t/"),n("wCL9")),ae=n.n(se),oe={name:"DefaultPlaces",i18n:{PLACES:S.o},components:{GlDisclosureDropdownGroup:E.a},inject:["contextSwitcherLinks"],computed:{shouldRender(){return this.contextSwitcherLinks.length>0},group(){return{name:this.$options.i18n.PLACES,items:this.contextSwitcherLinks.map((function({title:e,link:t,...n}){return{text:e,href:t,extraAttrs:{"data-track-action":j.o,"data-track-label":H.u,"data-track-property":H.v,"data-track-extra":JSON.stringify({title:e}),"data-testid":"places-item-link","data-qa-places-item":e,...Object.entries(n).reduce((function(e,[t,n]){return t.startsWith("data")&&(e[ae()(t)]=n),e}),{})}}}))}}},created(){this.shouldRender||this.$emit("nothing-to-render")}},le=Object(G.a)(oe,(function(){var e=this._self._c;return this.shouldRender?e("gl-disclosure-dropdown-group",this._b({attrs:{group:this.group}},"gl-disclosure-dropdown-group",this.$attrs,!1)):this._e()}),[],!1,null,null,null).exports,ce={name:"DefaultIssuables",i18n:{ALL_GITLAB:S.a},components:{GlDisclosureDropdownGroup:E.a},computed:{...Object(p.f)(["searchContext"]),...Object(p.d)(["defaultSearchOptions"]),currentContextName(){var e,t,n,i;return(null===(e=this.searchContext)||void 0===e||null===(t=e.project)||void 0===t?void 0:t.name)||(null===(n=this.searchContext)||void 0===n||null===(i=n.group)||void 0===i?void 0:i.name)||this.$options.i18n.ALL_GITLAB},shouldRender(){return this.group.items.length>0},group(){return{name:this.currentContextName,items:this.defaultSearchOptions}}},created(){this.shouldRender||this.$emit("nothing-to-render")}},ue=Object(G.a)(ce,(function(){var e=this._self._c;return this.shouldRender?e("gl-disclosure-dropdown-group",this._b({attrs:{group:this.group}},"gl-disclosure-dropdown-group",this.$attrs,!1)):this._e()}),[],!1,null,null,null).exports,de=n("Eqlq"),he=n.n(de),me=n("XiQx"),pe={name:"FrequentlyVisitedItem",components:{ProjectAvatar:n("3lQS").a},props:{item:{type:Object,required:!0}}},ge=Object(G.a)(pe,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"gl-display-flex gl-align-items-center gl-gap-3"},[t("project-avatar",{attrs:{"project-id":e.item.id,"project-name":e.item.title,"project-avatar-url":e.item.avatar,size:24,"aria-hidden":"true"}}),e._v(" "),t("div",{staticClass:"gl-flex-grow-1 gl-truncate-end"},[e._v("\n    "+e._s(e.item.title)+"\n    "),e.item.subtitle?t("div",{staticClass:"gl-font-sm gl-text-gray-500 gl-truncate-end",attrs:{"data-testid":"subtitle"}},[e._v("\n      "+e._s(e.item.subtitle)+"\n    ")]):e._e()])],1)}),[],!1,null,null,null).exports,fe={components:{GlSkeletonLoader:n("4+8U").a}},ve=Object(G.a)(fe,(function(){var e=this._self._c;return e("gl-skeleton-loader",{attrs:{width:737,height:48}},[e("rect",{attrs:{width:"24",height:"24",y:"12",x:"8"}}),this._v(" "),e("rect",{attrs:{width:"120",height:"12",y:"10",x:"36"}}),this._v(" "),e("rect",{attrs:{width:"100",height:"12",y:"26",x:"36"}})])}),[],!1,null,null,null).exports,_e={name:"FrequentlyVisitedItems",components:{GlDisclosureDropdownGroup:E.a,GlDisclosureDropdownItem:me.b,GlIcon:d.a,FrequentItem:ge,FrequentItemSkeleton:ve},props:{loading:{type:Boolean,required:!1,default:!1},emptyStateText:{type:String,required:!0},groupName:{type:String,required:!0},viewAllItemsText:{type:String,required:!0},viewAllItemsIcon:{type:String,required:!0},viewAllItemsPath:{type:String,required:!1,default:null},items:{type:Array,required:!1,default:function(){return[]}}},computed:{formattedItems(){return this.items.map((function(e){return{forDropdown:{id:e.id,text:e.name,href:e.webUrl,extraAttrs:{"data-track-action":j.o,"data-track-label":e.id,"data-track-property":H.v,"data-track-extra":JSON.stringify({title:e.name})}},forRenderer:{id:e.id,title:e.name,subtitle:Object(g.B)(e.namespace),avatar:e.avatarUrl}}}))},showEmptyState(){return!this.loading&&0===this.formattedItems.length},viewAllItem(){return{text:this.viewAllItemsText,href:this.viewAllItemsPath}}}},ye=Object(G.a)(_e,(function(){var e=this,t=e._self._c;return t("gl-disclosure-dropdown-group",e._b({scopedSlots:e._u([{key:"group-label",fn:function(){return[e._v(e._s(e.groupName))]},proxy:!0}])},"gl-disclosure-dropdown-group",e.$attrs,!1),[e._v(" "),e.loading?t("gl-disclosure-dropdown-item",[t("frequent-item-skeleton")],1):e._l(e.formattedItems,(function(n){return t("gl-disclosure-dropdown-item",{key:n.forDropdown.id,staticClass:"show-on-focus-or-hover--context",attrs:{item:n.forDropdown},scopedSlots:e._u([{key:"list-item",fn:function(){return[t("frequent-item",{attrs:{item:n.forRenderer}})]},proxy:!0}],null,!0)})})),e._v(" "),e.showEmptyState?t("gl-disclosure-dropdown-item",{staticClass:"gl-cursor-text"},[t("span",{staticClass:"gl-text-gray-500 gl-font-sm gl-my-3 gl-mx-3"},[e._v(e._s(e.emptyStateText))])]):e._e(),e._v(" "),t("gl-disclosure-dropdown-item",{key:"all",attrs:{item:e.viewAllItem},scopedSlots:e._u([{key:"list-item",fn:function(){return[t("span",[t("gl-icon",{staticClass:"gl-w-6!",attrs:{name:e.viewAllItemsIcon}}),e._v("\n        "+e._s(e.viewAllItemsText)+"\n      ")],1)]},proxy:!0}])})],2)}),[],!1,null,null,null).exports,Se={name:"FrequentlyVisitedGroups",apollo:{frecentGroups:{query:he.a}},components:{FrequentItems:ye},inject:["groupsPath"],i18n:{groupName:Object(_.g)("Navigation|Frequently visited groups"),viewAllText:Object(_.g)("Navigation|View all my groups"),emptyStateText:Object(_.g)("Navigation|Groups you visit often will appear here.")}},be=Object(G.a)(Se,(function(){var e=this;return(0,e._self._c)("frequent-items",e._g(e._b({attrs:{loading:e.$apollo.queries.frecentGroups.loading,"empty-state-text":e.$options.i18n.emptyStateText,"group-name":e.$options.i18n.groupName,items:e.frecentGroups,"view-all-items-icon":"group","view-all-items-text":e.$options.i18n.viewAllText,"view-all-items-path":e.groupsPath}},"frequent-items",e.$attrs,!1),e.$listeners))}),[],!1,null,null,null).exports,Ce=n("erDj"),xe={name:"FrequentlyVisitedProjects",apollo:{frecentProjects:{query:n.n(Ce).a}},components:{FrequentItems:ye},inject:["projectsPath"],i18n:{groupName:Object(_.g)("Navigation|Frequently visited projects"),viewAllText:Object(_.g)("Navigation|View all my projects"),emptyStateText:Object(_.g)("Navigation|Projects you visit often will appear here.")}};const we=[le,Object(G.a)(xe,(function(){var e=this;return(0,e._self._c)("frequent-items",e._g(e._b({attrs:{loading:e.$apollo.queries.frecentProjects.loading,"empty-state-text":e.$options.i18n.emptyStateText,"group-name":e.$options.i18n.groupName,items:e.frecentProjects,"view-all-items-icon":"project","view-all-items-text":e.$options.i18n.viewAllText,"view-all-items-path":e.projectsPath}},"frequent-items",e.$attrs,!1),e.$listeners))}),[],!1,null,null,null).exports,be,ue];var Ee={name:"GlobalSearchDefaultItems",data:()=>({componentNames:we.map((function({name:e}){return e}))}),methods:{componentFromName:e=>we.find((function(t){return t.name===e})),remove(e){const t=this.componentNames.findIndex((function(t){return t===e}));-1!==t&&this.componentNames.splice(t,1)},attrs:e=>0===e?null:{bordered:!0,class:"gl-mt-3"}}},ke=Object(G.a)(Ee,(function(){var e=this,t=e._self._c;return t("ul",{staticClass:"gl-p-0 gl-m-0 gl-pt-2 gl-list-style-none"},e._l(e.componentNames,(function(n,i){return t(e.componentFromName(n),e._b({key:n,tag:"component",on:{"nothing-to-render":function(t){return e.remove(n)}}},"component",e.attrs(i),!1))})),1)}),[],!1,null,null,null).exports,Oe={name:"GlobalSearchScopedItems",components:{GlIcon:d.a,GlToken:h.a,GlDisclosureDropdownGroup:E.a},computed:{...Object(p.f)(["search"]),...Object(p.d)(["scopedSearchGroup"])},methods:{titleLabel(e){return Object(_.h)(Object(_.g)("GlobalSearch|in %{scope}"),{search:this.search,scope:e.scope||e.description})},getTruncatedScope:e=>Object(g.A)(e,C.g)}},Ae=Object(G.a)(Oe,(function(){var e=this,t=e._self._c;return t("div",[t("ul",{staticClass:"gl-m-0 gl-p-0 gl-pb-2 gl-list-style-none"},[t("gl-disclosure-dropdown-group",{staticClass:"gl-mt-0!",attrs:{group:e.scopedSearchGroup,bordered:""},scopedSlots:e._u([{key:"list-item",fn:function({item:n}){return[t("span",{staticClass:"gl-display-flex gl-align-items-center gl-line-height-24 gl-flex-direction-row gl-w-full"},[t("gl-icon",{staticClass:"gl-flex-shrink-0 gl-mr-2 gl-pt-2 gl-mt-n2",attrs:{name:"search"}}),e._v(" "),t("span",{staticClass:"gl-flex-grow-1"},[t("gl-token",{staticClass:"gl-flex-shrink-0 gl-white-space-nowrap gl-float-right",attrs:{"view-only":""}},[n.icon?t("gl-icon",{staticClass:"gl-mr-2",attrs:{name:n.icon}}):e._e(),e._v(" "),t("span",[e._v(e._s(e.getTruncatedScope(e.titleLabel(n))))])],1),e._v("\n            "+e._s(e.search)+"\n          ")],1)],1)]}}])})],1)])}),[],!1,null,null,null).exports,Ie={name:"GlobalSearchModal",SEARCH_MODAL_ID:C.j,i18n:{COMMAND_PALETTE:S.c,SEARCH_DESCRIBED_BY_WITH_RESULTS:S.t,SEARCH_DESCRIBED_BY_DEFAULT:S.r,SEARCH_DESCRIBED_BY_UPDATED:S.s,SEARCH_OR_COMMAND_MODE_PLACEHOLDER:j.k,SEARCH_RESULTS_LOADING:S.u,SEARCH_RESULTS_SCOPE:S.w,MIN_SEARCH_TERM:S.h},directives:{Outside:o.a,GlTooltip:l.a,GlResizeObserverDirective:c.a},components:{GlSearchBoxByType:u.a,GlobalSearchDefaultItems:ke,GlobalSearchScopedItems:Ae,GlobalSearchAutocompleteItems:re,GlIcon:d.a,GlToken:h.a,GlModal:m.a,CommandPaletteItems:W,FakeSearchInput:te},data:()=>({nextFocusedItemIndex:null}),computed:{...Object(p.f)(["search","loading","searchContext"]),...Object(p.d)(["searchQuery","searchOptions","scopedSearchOptions"]),searchText:{get(){return this.search},set(e){this.setSearch(e)}},showDefaultItems(){return!this.searchText},searchTermOverMin(){var e;return(null===(e=this.searchText)||void 0===e?void 0:e.length)>C.m},showScopedSearchItems(){return this.searchTermOverMin&&this.scopedSearchOptions.length>1},searchResultsDescription(){return this.showDefaultItems?Object(_.h)(this.$options.i18n.SEARCH_DESCRIBED_BY_DEFAULT,{count:this.searchOptions.length}):this.searchTermOverMin?this.loading?this.$options.i18n.SEARCH_RESULTS_LOADING:Object(_.h)(this.$options.i18n.SEARCH_DESCRIBED_BY_UPDATED,{count:this.searchOptions.length}):this.$options.i18n.MIN_SEARCH_TERM},showScopeToken(){return this.searchTermOverMin&&!this.isCommandMode},searchBarItem(){var e;return null===(e=this.searchOptions)||void 0===e?void 0:e[0]},scopeTokenText(){var e,t;return(null===(e=this.searchBarItem)||void 0===e?void 0:e.scope)||(null===(t=this.searchBarItem)||void 0===t?void 0:t.description)},scopeTokenIcon(){var e;return this.isCommandMode?null:null===(e=this.searchBarItem)||void 0===e?void 0:e.icon},searchScope(){return Object(_.h)(this.$options.i18n.SEARCH_RESULTS_SCOPE,{scope:this.scopeTokenText})},truncatedSearchScope(){return Object(g.A)(this.searchScope,C.g)},searchTextFirstChar(){var e;return null===(e=this.searchText)||void 0===e?void 0:e.trim().charAt(0)},isCommandMode(){var e;return j.b.includes(this.searchTextFirstChar)||(null===(e=this.searchContext)||void 0===e?void 0:e.project)&&this.searchTextFirstChar===j.i},commandPaletteQuery(){var e;return this.isCommandMode?null===(e=this.searchText)||void 0===e?void 0:e.trim().substring(1):""},commandHighlightClass:()=>Object(b.a)()?"gl-bg-gray-10!":"gl-bg-gray-50!"},watch:{nextFocusedItemIndex(){this.highlightFirstCommand()}},methods:{...Object(p.c)(["setSearch","fetchAutocompleteOptions","clearAutocomplete"]),getAutocompleteOptions:a()((function(e){this.isCommandMode||(e?this.fetchAutocompleteOptions():this.clearAutocomplete())}),v.k),observeTokenWidth({contentRect:{width:e}}){var t,n,i;const r=null===(t=this.$refs)||void 0===t||null===(n=t.searchInputBox)||void 0===n||null===(i=n.$el)||void 0===i?void 0:i.querySelector("input");r&&(r.style.paddingRight=e+C.e+"px")},getFocusableOptions(){var e;return Array.from((null===(e=this.$refs.resultsList)||void 0===e?void 0:e.querySelectorAll(C.l))||[])},onKeydown(e){const{code:t,target:n}=e;let i=!0;const r=this.getFocusableOptions();if(r.length<1)return;const s=n.matches(C.i);if(t===y.g){if(s)return;this.focusItem(0,r)}else if(t===y.d){if(s)return;this.focusItem(r.length-1,r)}else if(t===y.b){if(s)return;0===r.indexOf(n)?this.focusSearchInput():this.focusNextItem(e,r,-1)}else if(t===y.a)this.focusNextItem(e,r,1);else if(t===y.f)this.$refs.searchModal.close();else if(t===y.h){var a;null===(a=e.target)||void 0===a||a.firstChild.click()}else i=!1;i&&e.preventDefault()},focusSearchInput(){this.$refs.searchInput.$el.querySelector("input").focus()},focusNextItem(e,t,n){const{target:i}=e,s=t.indexOf(i),a=r()(s+n,0,t.length-1);this.focusItem(a,t)},focusItem(e,t){var n;this.nextFocusedItemIndex=e,null===(n=t[e])||void 0===n||n.focus()},submitSearch(){var e;this.isCommandMode?this.runFirstCommand():(null===(e=this.search)||void 0===e?void 0:e.length)<=C.m||Object(f.U)(this.searchQuery)},runFirstCommand(){var e;null===(e=this.getFocusableOptions()[0])||void 0===e||e.firstChild.click()},onSearchModalShown(){this.$emit("shown")},onSearchModalHidden(){this.searchText="",this.$emit("hidden")},highlightFirstCommand(){if(this.isCommandMode){var e;const t=null===(e=this.getFocusableOptions()[0])||void 0===e?void 0:e.firstChild;null==t||t.classList.toggle(this.commandHighlightClass,Boolean(!this.nextFocusedItemIndex))}}},SEARCH_INPUT_DESCRIPTION:C.h,SEARCH_RESULTS_DESCRIPTION:C.k},Te=Object(G.a)(Ie,(function(){var e=this,t=e._self._c;return t("gl-modal",{ref:"searchModal",attrs:{"modal-id":e.$options.SEARCH_MODAL_ID,"hide-header":"","hide-footer":"","hide-header-close":"",scrollable:"",title:e.$options.i18n.COMMAND_PALETTE,"body-class":"gl-p-0!","modal-class":"global-search-modal",centered:!1},on:{shown:e.onSearchModalShown,hide:e.onSearchModalHidden}},[t("form",{staticClass:"gl-relative gl-rounded-base gl-w-full gl-pb-0",attrs:{role:"search","aria-label":e.$options.i18n.SEARCH_OR_COMMAND_MODE_PLACEHOLDER}},[t("div",{staticClass:"gl-relative gl-bg-white gl-border-b gl-mb-n1 gl-p-3"},[t("gl-search-box-by-type",{ref:"searchInput",attrs:{id:"search",role:"searchbox","data-testid":"global-search-input",autocomplete:"off",placeholder:e.$options.i18n.SEARCH_OR_COMMAND_MODE_PLACEHOLDER,"aria-describedby":e.$options.SEARCH_INPUT_DESCRIPTION,borderless:""},on:{input:e.getAutocompleteOptions,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),t.preventDefault(),e.submitSearch.apply(null,arguments))},e.onKeydown]},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),e._v(" "),e.showScopeToken?t("gl-token",{directives:[{name:"gl-resize-observer-directive",rawName:"v-gl-resize-observer-directive",value:e.observeTokenWidth,expression:"observeTokenWidth"}],staticClass:"search-scope-help gl-absolute gl-sm-display-block gl-display-none",attrs:{"view-only":"",title:e.searchScope}},[e.scopeTokenIcon?t("gl-icon",{staticClass:"gl-mr-2",attrs:{"aria-label":e.scopeTokenText,name:e.scopeTokenIcon,size:16}}):e._e(),e._v("\n        "+e._s(e.truncatedSearchScope)+"\n      ")],1):e._e(),e._v(" "),t("span",{staticClass:"gl-sr-only",attrs:{id:e.$options.SEARCH_INPUT_DESCRIPTION,role:"region"}},[e._v("\n        "+e._s(e.$options.i18n.SEARCH_DESCRIBED_BY_WITH_RESULTS)+"\n      ")]),e._v(" "),e.isCommandMode?t("fake-search-input",{staticClass:"gl-absolute",attrs:{"user-input":e.commandPaletteQuery,scope:e.searchTextFirstChar}}):e._e()],1),e._v(" "),t("span",{staticClass:"gl-sr-only",attrs:{role:"region","data-testid":e.$options.SEARCH_RESULTS_DESCRIPTION,"aria-live":"polite","aria-atomic":"true"}},[e._v("\n      "+e._s(e.searchResultsDescription)+"\n    ")]),e._v(" "),t("div",{ref:"resultsList",staticClass:"global-search-results gl-overflow-y-auto gl-w-full gl-pb-3",on:{keydown:e.onKeydown}},[e.isCommandMode?t("command-palette-items",{attrs:{"search-query":e.commandPaletteQuery,handle:e.searchTextFirstChar},on:{updated:e.highlightFirstCommand}}):e.showDefaultItems?t("global-search-default-items"):[e.showScopedSearchItems?t("global-search-scoped-items"):e._e(),e._v(" "),t("global-search-autocomplete-items")]],2),e._v(" "),e.searchContext?[e.searchContext.group?t("input",{attrs:{type:"hidden",name:"group_id"},domProps:{value:e.searchContext.group.id}}):e._e(),e._v(" "),e.searchContext.project?t("input",{attrs:{type:"hidden",name:"project_id"},domProps:{value:e.searchContext.project.id}}):e._e(),e._v(" "),e.searchContext.group||e.searchContext.project?[t("input",{attrs:{type:"hidden",name:"scope"},domProps:{value:e.searchContext.scope}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"search_code"},domProps:{value:e.searchContext.code_search}})]:e._e(),e._v(" "),t("input",{attrs:{type:"hidden",name:"snippets"},domProps:{value:e.searchContext.for_snippets}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"repository_ref"},domProps:{value:e.searchContext.ref}})]:e._e()],2)])}),[],!1,null,null,null);t.default=Te.exports},erDj:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CurrentUserFrecentProjects"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"frecentProjects"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"namespace"},name:{kind:"Name",value:"nameWithNamespace"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:135}};n.loc.source={body:"query CurrentUserFrecentProjects {\n  frecentProjects {\n    id\n    name\n    namespace: nameWithNamespace\n    webUrl\n    avatarUrl\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.CurrentUserFrecentProjects=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var s=i[t]||new Set,a=new Set,o=new Set;for(s.forEach((function(e){o.add(e)}));o.size>0;){var l=o;o=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(i[e]||new Set).forEach((function(e){o.add(e)})))}))}return a.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"CurrentUserFrecentProjects")},y8hF:function(e,t,n){(e.exports=n("VNgF")(!1)).push([e.i,"\n.fake-input[data-v-3b7a265c] {\n  top: 18px;\n  left: 39px;\n}\n",""])}}]);
//# sourceMappingURL=global_search_modal.2ebb3b82.chunk.js.map